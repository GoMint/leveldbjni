diff --git a/db/c.cc b/db/c.cc
index 8dac2c1..52fbaa6 100644
--- a/db/c.cc
+++ b/db/c.cc
@@ -5,7 +5,7 @@
 #include "leveldb/c.h"
 
 #include <stdlib.h>
-#include <unistd.h>
+
 #include "leveldb/cache.h"
 #include "leveldb/comparator.h"
 #include "leveldb/db.h"
@@ -16,7 +16,9 @@
 #include "leveldb/status.h"
 #include "leveldb/write_batch.h"
 #include "leveldb/zlib_compressor.h"
+#ifdef SNAPPY
 #include "leveldb/snappy_compressor.h"
+#endif
 
 using leveldb::Cache;
 using leveldb::Comparator;
diff --git a/db/db_iter.cc b/db/db_iter.cc
index 3b2035e..6e6e942 100644
--- a/db/db_iter.cc
+++ b/db/db_iter.cc
@@ -14,6 +14,11 @@
 #include "util/mutexlock.h"
 #include "util/random.h"
 
+#if defined(_MSC_VER)
+#include <BaseTsd.h>
+typedef SSIZE_T ssize_t;
+#endif
+
 namespace leveldb {
 
 #if 0
